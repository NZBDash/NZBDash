@using NZBDash.UI.Models
@model NZBDash.UI.Models.ViewModels.Sonarr.SonarrEpisodeViewModel


<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title" id="episodeModal">@Model.SeasonTitle</h4>
</div>
<div class="modal-body">
    @foreach (var kvp in Model.EpisodeViewModels)
    {
        <div class="panel panel-default">
            <div class="panel-heading panel-grid">
                @*<h4 class="panel-title">Season @kvp.Key</h4>*@

                <h4 class="col-md-1 panel-title-small text-left"></h4>
                <h4 class="col-md-6 panel-title-small text-center">Title</h4>
                <h4 class="col-md-2 panel-title-small text-center">Downloaded</h4>
                <h4 class="col-md-2 panel-title-small text-center">Air Date</h4>
                <h4 class="col-md-1 panel-title-small text-left">Search</h4>
            </div>
            <div class="panel-body">
                <small>Season @kvp.Key</small>
                <div class="divider"></div>
                @foreach (var ep in kvp.Value)
                {
                    <div class="row">
                        <div class="col-md-1 text-center">@ep.EpisodeNumber</div>
                        <div class="col-md-6">@ep.Title</div>
                        <div class="col-md-2 text-center">@Html.Raw(ep.HasFileIcon)</div>
                        <div class="col-md-2 text-center">@ep.AirDate.ToShortDateString()</div>
                        <div class="col-md-1 text-center"><i class="fa @FontAwesome.Search"><a class="episodeId" href="#" id="@ep.ID"></a></i></div>
                    </div>
                }
            </div>
        </div>
    }

</div>
<div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>

<script>
    $(function() {
        $('#episodeId').click(function (e) {
            var id = e.target.id;
            //TODO: Send request to search for Sonarr episode
        });
    });
</script>